<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Réalisation d'un stabilisateur de caméra</title>
    <link rel="stylesheet" href="../../style.css">
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <nav class="navbar" id="main-navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="../../index.html">Oscar Diguiny</a>
            </div>
            <div class="nav-right">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="../../index.html" class="nav-link" data-fr="Accueil" data-en="Home">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a href="../carriere.html" class="nav-link" data-fr="Carrière" data-en="Career">Carrière</a>
                    </li>
                    <li class="nav-item">
                        <a href="../projets.html" class="nav-link" data-fr="Mes projets" data-en="My Projects">Mes projets</a>
                    </li>
                    <li class="nav-item">
                        <a href="../mobilites.html" class="nav-link" data-fr="Mobilité Internationales" data-en="International Mobility">Mobilité Internationales</a>
                    </li>
                    <li class="nav-item">
                        <a href="../engagment-civique.html" class="nav-link" data-fr="Engagement civique" data-en="Civic Commitment">Engagement civique</a>
                    </li>
                    <li class="nav-item">
                        <a href="../autres-activites.html" class="nav-link" data-fr="Autres activités" data-en="Other Activities">Autres activités</a>
                    </li>
                </ul>
                <div class="language-toggle">
                    <button id="lang-toggle" class="lang-btn">
                        <span class="lang-text">FR</span>
                        <span class="lang-text">EN</span>
                        <span class="lang-slider"></span>
                    </button>
                </div>
            </div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>
    <style>
        :root { color-scheme: light dark; }
        html, body { height: 100%; margin: 0; }
        body {
            background: #f3f4f6;
            color: #111827;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
        }
        main {
            min-height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 48px 16px;
        }
        .page {
            background: #ffffff;
            color: inherit;
            width: clamp(280px, 90vw, 400mm);
            min-height: 297mm;
            max-width: calc(100vw - 32px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.12);
            border-radius: 6px;
            padding: clamp(24px, 4vw, 32mm) clamp(16px, 3vw, 22mm); 
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        @media (max-width: 800px) {
            .page {
                width: 100%;
                min-height: auto;
                aspect-ratio: 210 / 297;
                padding: 24px;
            }
        }
        h1 {
            font-weight: 700;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0;
            position: absolute;
            text-align: center;
            top: 32px;
            left: 50%;
            transform: translateX(-50%);
            right: 0;
            max-width: 1000px;
            font-size: clamp(1.6rem, 2.5vw + 1rem, 2.4rem);
            width: 100%;
            height: 60px;
        }
        .titre-souligne-gras {
            font-weight: bold;
            text-decoration: underline;
            font-size: 1.15rem;
            margin-top: 2.5rem;
            display: inline;
        }  
        .texte{
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: var(--text-primary);
        }
        .page {
            position: relative;
            padding-top: 100px; /* Adds space under the fixed h1 */
        }
        .back-link {
            position: absolute;
            top: 24px;
            left: 24px;
            font-size: 0.95rem;
            color: #9ca3af;
            text-decoration: underline;
            z-index: 2;
        }
        .back-link:hover {
            color: #6b7280;
        }
    </style>
</head>
<body>
    <main>
        <div class="page">
            <a href="../projets.html" class="back-link" title="Retour à la liste des projets" data-fr="Retour" data-en="Back">Retour</a>
            <h1 
                data-fr="Réalisation d&apos;un stabilisateur de caméra avec une carte arduino et des composants du commerce"
                data-en="Building a Camera Stabilizer Using an Arduino Board and Off-the-Shelf Components"
            >
                Réalisation d'un stabilisateur de caméra avec une carte arduino et des composants du commerce
            </h1>
            <p class="texte" style="margin-top: 4rem"
               data-fr="Au cours de ma 2ème année de classe préparatoire et dans le cadre de mon TIPE (Travail d'Initiative Personnelle Encadrée), j'ai réalisé une maquette qui reproduit le fonctionnement d'un stabilisateur de caméra sur un axe."
               data-en="During my second year of preparatory class, as part of my TIPE (French preparatory class project), I built a prototype to reproduce how a single-axis camera stabilizer works."
            >Au cours de ma 2ème année de classe préparatoire et dans le cadre de mon TIPE (Travail d'Initiative Personnelle Encadrée), j'ai réalisé une maquette qui reproduit le fonctionnement d'un stabilisateur de caméra sur un axe.</p>
            <img src="../../images/projets/maquette un peu penchee.jpg" alt="Maquette stabilisateur - vue penchée" width="30%" height="auto" style="margin-top: 2rem; display: block; margin-left: auto; margin-right: auto;"> 
            
            <span class="titre-souligne-gras" data-fr="Matériel utilisé :" data-en="Hardware used:">Matériel utilisé :</span>
            <ul style="margin-top: 0.5rem; margin-left: 2rem;">
                <li data-fr="Carte Arduino Uno" data-en="Arduino Uno board">Carte Arduino Uno</li>
                <li data-fr="Moteur pas à pas 24BYJ48" data-en="Stepper motor 24BYJ48">Moteur pas à pas 24BYJ48</li>
                <li data-fr="2× MPU6050 (module comportant un accéléromètre et un gyroscope)" data-en="2× MPU6050 (module with accelerometer and gyroscope)">2&#215; MPU6050 (module comportant un accéléromètre et un gyroscope)</li>
                <li data-fr="Pont en H" data-en="H-bridge">Pont en H</li>
            </ul>
            <span style="white-space: nowrap; margin-top:2.5rem">
                <span class="titre-souligne-gras" data-fr="Fonction réalisée :" data-en="Main function:">Fonction réalisée :</span>
                <span class="texte" style="margin-left: 0.5rem"
                      data-fr="maintient le plateau bleu (qui modélise la caméra) à l'horizontale"
                      data-en="keeps the blue platform (representing the camera) horizontaly aligned with the ground"
                >maintient le plateau bleu (qui modélise la caméra) à l'horizontale</span>
            </span>
            <span class="titre-souligne-gras" data-fr="Ce que j'ai appris :" data-en="What I learned:">Ce que j'ai appris :</span>
            <ul style="margin-top: 0.5rem; margin-left: 2rem;">
                <li data-fr="Intérêt et fonctionnement du filtre complémentaire pour l'accéléromètre et le gyroscope" data-en="Benefits and principles of the complementary filter for accelerometer and gyroscope data">Intérêt et fonctionnement du filtre complémentaire pour l'accéléromètre et le gyroscope</li>
                <li data-fr="Fonctionnement et commande du moteur pas à pas en mode pas entiers et demi-pas" data-en="How to control a stepper motor in full-step and half-step modes">Fonctionnement et commande du moteur pas à pas en mode pas entiers et demi-pas</li>
            </ul>
        <style>
            .code-block-container {
                background: #262f3d;
                border-radius: 8px;
                padding: 2rem 1.5rem 3rem 1.5rem;
                margin: 2rem auto 2rem auto;
                max-width: 95vw;
                width: 100%;
                box-shadow: 0 2px 24px rgba(0, 0, 0, 0.10);
                color: #f4f4f4;
                position: relative;
                font-family: 'Fira Mono', 'Consolas', 'Menlo', 'Monaco', monospace;
                overflow-x: auto;
            }
            .code-block-container pre {
                margin: 0;
                background: transparent;
                color: #f4f4f4;
                font-size: 0.95rem;
                line-height: 1.6;
                padding: 0;
            }
            .code-block-header {
                font-size: 1.05rem;
                color: #85bfff;
                font-weight: 600;
                margin-bottom: 0.75rem;
                letter-spacing: 0.04em;
            }
            /* Prism.js custom styles */
            .code-block-container pre[class*="language-"] {
                background: #262f3d !important;
                border-radius: 0;
            }
            .code-block-container code[class*="language-"] {
                background: transparent !important;
                color: #e2e8f0 !important;
            }
            .code-block-container .token.comment {
                color: #68d391 !important;
                font-style: italic;
            }
            .code-block-container .token.keyword {
                color: #f687b3 !important;
                font-weight: bold;
            }
            .code-block-container .token.string {
                color: #fbb6ce !important;
            }
            .code-block-container .token.number {
                color: #f6ad55 !important;
            }
            .code-block-container .token.function {
                color: #90cdf4 !important;
            }
            .code-block-container .token.class-name {
                color: #fbb6ce !important;
            }
            .code-block-container .token.operator {
                color: #f687b3 !important;
            }
            .code-block-container .token.punctuation {
                color: #e2e8f0 !important;
            }
            .code-block-container pre[class*="line-numbers"] {
                padding-left: 3.8em !important;
            }
            .code-block-container .line-numbers .line-numbers-rows {
                border-right: 1px solid #4a5568;
            }
            .code-block-container .line-numbers .line-numbers-rows > span:before {
                color: #718096 !important;
            }
            .expand-button {
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: #4a5568;
                color: #e2e8f0;
                border: none;
                border-radius: 0 0 8px 8px;
                padding: 0.75rem 1rem;
                cursor: pointer;
                font-size: 0.9rem;
                transition: all 0.3s ease;
                z-index: 10;
                width: 100%;
                text-align: center;
                font-weight: 500;
            }
            .expand-button:hover {
                background: #2d3748;
            }
            .expand-button.expanded {
                background: #2b6cb0;
            }
            .expand-button.expanded:hover {
                background: #2c5282;
            }
            .code-hidden {
                display: none !important;
            }
            .code-extended {
                display: none !important;
            }
            .code-block-container {
                position: relative;
                padding-bottom: 0;
            }
            .code-block-container pre {
                position: relative;
                margin-bottom: 0;
            }
        </style>
        <div class="code-block-container">
            <div class="code-block-header" data-fr="Code arduino" data-en="Arduino code">Code arduino</div>
            <button class="expand-button" onclick="toggleCode()" data-fr="▼ Voir plus" data-en="▼ See more">▼ Voir plus</button>
            <pre class="line-numbers"><code class="language-cpp">#include "Wire.h"  // bibliothèque Wire 
#include "I2Cdev.h"  //bibliothèque I2Cdev 
#include "MPU6050.h" //bibliothèque MPU6050 
MPU6050 accelgyro1(0x69); //définition de l'adresse I2C associée au capteur 1
MPU6050 accelgyro2(0x68); //définition de l'adresse I2C associée au capteur 2
 
//Variables acquisition de theta1 (boîte)
int16_t ax1, ay1, az1;  //accélérations linéaires brutes
int16_t gx1, gy1, gz1;  //vitesses de rotation brutes à diviser par la sensibilité 
float theta_1_gyro=0;
float tehta_1_accel=0;
float theta_1_filtre=0;
float offset1 = -0.00526; //offset pour empecher la dérive du gyroscope 1

// Variables acquisition de theta2 (plateau)
int16_t az2, ax2, ay2 ;  //accélérations linéaires brutes
int16_t gz2, gx2, gy2 ;  //vitesses de rotation brutes à diviser par la sensibilité 

</code></pre>
            <!-- Hidden code -->
            <div id="hidden-code" style="display: none;">
                <pre class="line-numbers"><code class="language-cpp">
float angle_gyro2;
float theta_2_accel=0;
float theta_2_filtre;
float offset2 = 0.057; //offset pour empecher la dérive du gyroscope 2

float K=0.03; //constante pour le filtre comlémentaire


//Variables consigne angulaire
float ecart;
float consigne = 0; //Position angulaire autour de laquelle on cherche à se stabiliser (0° pour être à l'horizontale)
float seuil = 360*4/1024; //angele qui correspond à 4 pas = 1.4°

//Variables moteur 
const int pinBobine1A = 8 ;
const int pinBobine1B = 9 ;
const int pinBobine2A = 10 ;
const int pinBobine2B = 11 ;
float Tps =4;//délai entre chaque pas (4ms en pas entiers, 2ms en demi pas)
float dt = 4*Tps;//durée de chaque tour de boucle (16ms en pas entiers, 8*Tps = 16ms en demi pas)

unsigned long temps;//variable d'acquisition du temps pour python


void setup() {

accelgyro.initialize();  // initialisation du gyroscope 1
accelgyro2.initialize();  // initialisation du gyroscope 2

pinMode(pinBobine1A, OUTPUT); //définition des sorties pour le moteur
pinMode(piBobine1B, OUTPUT); // 
pinMode(piBobine2A, OUTPUT); // 
pinMode(piBobine2B, OUTPUT); //
}

void loop() {

    accelgyro1.getMotion6(&ax1, &ay1, &az1, &gx1, &gy1, &gz1); //accélérations linéaires et vitesses angulaires brutes du capteur 1
    accelgyro2.getMotion6(&az2,&ax2, &ay2, &gz2, &gx2, &gy2); //Permutations des axes d'origine pour respecter le paramétrage

    //acquisition de l'angle du manche (pour affichage seulement)    
    theta_1_accel = atan2((double)ax1,(double)ay1)*180/PI;  //Arctan(ax1/ay1) et 180/PI permet d'avoir l'angle en degré (double : variable locale)
    theta_1_filtre= K*theta_1_accel + (1-K)*(theta_1_filtre + offset1 +float(gz1)*dt/65.5); // 65.5 cf doc MPU6050, dt en s 

    //acquisition de l'angle du plateau (caméra)
    theta_2_accel = atan2((double)ax2,(double)ay2)*180/PI; 
    theta_2_filtre= K*theta_2_acel + (1-K)*(theta_2_filtre + offset2 +float(gz2)*dt/65.5); 

    ecart = consigne - theta_2_filtre; //écart angulaire de la caméra avec l'horizontale

    if (ecart>seuil){
        pas_entier_sens_horaire(); //ou demi_pas_sens_horaire();
    }
    else if (ecart<-1*seuil){ //ou demi_pas_sens_trigo();
        pas_entier_sens_trigo();
    }
    else{
        delay(4*Tps);
    }
    }
    
    void pas_entier_sens_horaire(){
    // Pas n°1 |
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(piBobine1B, LOW);   
    digitalWrite(piBobine2A, HIGH);
    digitalWrite(piBobine2B, LOW);
    delay(Tps); 


    // Pas n°2 |
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(piBobine1B, LOW);  
    digitalWrite(piBobine2A, LOW);
    digitalWrite(piBobine2B, LOW);
    delay(Tps); 

    // Pas n°3 |
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(piBobine1B, LOW);   
    digitalWrite(piBobine2A, LOW);
    digitalWrite(piBobine2B, HIGH);
    delay(Tps); 

    // Pas n°4 |
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(piBobine1B, HIGH);  
    digitalWrite(piBobine2A, LOW);
    digitalWrite(piBobine2B, LOW);
    delay(Tps); 
}    


void pas_entier_sens_trigo(){
    // Pas n°1 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, HIGH);  
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2B, LOW);
    delay(Tps);

    // Pas n°2 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, LOW);   
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2B, HIGH);
    delay(Tps); 

    // Pas n°3 | 
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(pinBobine1B, LOW);  
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2B, LOW);
    delay(Tps); 

    // Pas n°4 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, LOW);   
    digitalWrite(pinBobine2A, HIGH);
    digitalWrite(pinBobine2B, LOW);
    delay(Tps); 

}

void demi_pas_sens_horaire(){
    // Pas n°1 | 
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(pinBobine1B, LOW);  
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps);

    //Pas n°1.5 |
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(pinBobine1B, LOW);  
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, HIGH);
    delay(Tps);
    // Pas n°2 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, LOW);  
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, HIGH);
    delay(Tps); 
    // Pas n°2.5 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, HIGH);   
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, HIGH);
    delay(Tps); 

    // Pas n°3 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, HIGH);   
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps); 
    // Pas n°3.5 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, HIGH);  
    digitalWrite(pinBobine2A, HIGH);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps); 

    // Pas n°4 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, LOW);   
    digitalWrite(pinBobine2A, HIGH);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps); 

    // Pas n°4.5 | 
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(pinBobine1B, LOW);   
    digitalWrite(pinBobine2A, HIGH);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps); 
    }


void demi_pas_sens_trigo(){
    // Pas n°1 | 
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(pinBobine1B, LOW);  
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps);

    //Pas n°1.5 | 
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(pinBobine1B, LOW);  
    digitalWrite(pinBobine2A, HIGH);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps);

    // Pas n°2 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, LOW);  
    digitalWrite(pinBobine2A, HIGH);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps);

    // Pas n°2.5 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, HIGH);   
    digitalWrite(pinBobine2A, HIGH);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps); 

    // Pas n°3 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, HIGH);   
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, LOW);
    delay(Tps); 
    // Pas n°3.5 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, HIGH);  
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, HIGH);
    delay(Tps); 

    // Pas n°4 | 
    digitalWrite(pinBobine1A, LOW);
    digitalWrite(pinBobine1B, LOW);   
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, HIGH);
    delay(Tps); 

    // Pas n°4.5 | 
    digitalWrite(pinBobine1A, HIGH);
    digitalWrite(pinBobine1B, LOW);   
    digitalWrite(pinBobine2A, LOW);
    digitalWrite(pinBobine2A, HIGH);
    delay(Tps); 
}</code></pre>
            </div>
        </div>
        </div>
    </main>
    <script>
        // Gestion langue persistée (comme sur les autres pages)
        let currentLang = localStorage.getItem('lang') || 'fr';

        // Fonction pour basculer l'affichage du code
        function toggleCode() {
            const hiddenCode = document.getElementById('hidden-code');
            const button = document.querySelector('.expand-button');
            // Update button text depending on current language
            const btnTextFR = "▲ Voir moins";
            const btnTextEN = "▲ See less";
            const btnTextFRMore = "▼ Voir plus";
            const btnTextENMore = "▼ See more";
            const langIsEn = currentLang === 'en';
            if (hiddenCode.style.display === 'none') {
                hiddenCode.style.display = 'block';
                button.textContent = langIsEn ? btnTextEN : btnTextFR;
                button.classList.add('expanded');
            } else {
                hiddenCode.style.display = 'none';
                button.textContent = langIsEn ? btnTextENMore : btnTextFRMore;
                button.classList.remove('expanded');
            }
        }

        function updateLangTexts(lang) {
            // Met à jour la langue courante et la stocke
            currentLang = (lang === 'en') ? 'en' : 'fr';
            localStorage.setItem('lang', currentLang);

            // Set lang attr on html
            document.documentElement.lang = currentLang;
            // Page-wide class for CSS/JS
            document.body.classList.toggle('lang-en', currentLang === 'en');

            // Update texts using data-fr/data-en attributes
            document.querySelectorAll('[data-fr][data-en]').forEach(el => {
                el.textContent = (currentLang === 'en') ? el.getAttribute('data-en') : el.getAttribute('data-fr');
            });
            // For h1, set innerHTML for apostrophe
            const h1 = document.querySelector('h1[data-fr][data-en]');
            if (h1) h1.innerHTML = (currentLang === 'en') ? h1.getAttribute('data-en') : h1.getAttribute('data-fr');
            // For meta title (optionally update the page title)
            document.title = (currentLang === 'en') ? "Building a Camera Stabilizer" : "Réalisation d'un stabilisateur de caméra";
            // Pour l'état du bouton langue
            const langToggle = document.getElementById('lang-toggle');
            if (langToggle) {
                langToggle.classList.toggle('active', currentLang === 'en');
            }
            // Pour le bouton expand (voir plus/moins)
            const expandBtn = document.querySelector('.expand-button');
            if (expandBtn) {
                if (expandBtn.classList.contains('expanded')) {
                    expandBtn.textContent = (currentLang === 'en') ? "▲ See less" : "▲ Voir moins";
                } else {
                    expandBtn.textContent = (currentLang === 'en') ? "▼ See more" : "▼ Voir plus";
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Init code hidden
            const hiddenCode = document.getElementById('hidden-code');
            if (hiddenCode) hiddenCode.style.display = 'none';

            // Prism.js init
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
            // Force navbar color blue on load
            const navbar = document.getElementById('main-navbar');
            if (navbar) {
                navbar.classList.add('scrolled');
            }
            // Menu mobile (hamburger)
            const hamburger = document.querySelector('.hamburger');
            const navRight = document.querySelector('.nav-right');
            if (hamburger && navRight) {
                hamburger.addEventListener('click', () => {
                    hamburger.classList.toggle('active');
                    navRight.classList.toggle('active');
                });
                document.querySelectorAll('.nav-link').forEach(n => n.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    navRight.classList.remove('active');
                }));
            }
            // Language toggle button: switch between FR/EN
            const langToggle = document.getElementById('lang-toggle');
            if (langToggle) {
                langToggle.classList.toggle('active', currentLang === 'en');
                langToggle.addEventListener('click', function(evt) {
                    // toggle lang
                    currentLang = (currentLang === 'fr') ? 'en' : 'fr';
                    updateLangTexts(currentLang);
                });
            }
            // Appliquer la langue dès chargement
            updateLangTexts(currentLang);
        });
    </script>
</body>
</html>


